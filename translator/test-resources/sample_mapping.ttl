@base <http://example.com/ns#>.
@prefix rr: <http://www.w3.org/ns/r2rml#>.
@prefix rml: <http://semweb.mmlab.be/ns/rml#>.
@prefix ql: <http://semweb.mmlab.be/ns/ql#>.
@prefix transit: <http://vocab.org/transit/terms/>.
@prefix xsd: <http://www.w3.org/2001/XMLSchema#>.
@prefix wgs84_pos: <http://www.w3.org/2003/01/geo/wgs84_pos#>.
@prefix ex: <http://example.com/>.

<#LogicalSource> rml:source "shoes.csv";
  rml:referenceFormulation ql:CSV.

<#ShoeMapping> a rr:TriplesMap;
  rml:logicalSource <#LogicalSource>;
  rr:subjectMap [
    rr:class ex:Shoe;
    rr:template "example/{shoeId}";
    rr:graph ex:ShoeGraph;
    rr:graph ex:DummyShoeGraph;
  ];
  rr:predicateObjectMap [
    rr:predicate ex:joinedBrand;
    rr:objectMap [ rr:parentTriplesMap <#BrandMapping> ];
    rr:graph ex:JoinedGraph;
  ];

  rr:predicateObjectMap [
    rr:predicate ex:jcJoin;
    rr:objectMap [ rr:parentTriplesMap <#BrandMapping>;
        rr:joinCondition [
            rr:parent "brand"; 
            rr:child "henlo"
        ]
    ];
    rr:graph ex:JCJoinedGraph;
  ];

  rr:predicateObjectMap [
    rr:predicate ex:price;
    rr:objectMap [ rml:reference "price" ];
    rr:objectMap [ rml:reference "avgPrice" ];
  ].

<#BrandMapping> a rr:TriplesMap;
  rml:logicalSource <#LogicalSource>;
  rr:subjectMap [
    rr:template "example/{brand}";
    rr:graph ex:BrandGraph;
    rr:graph ex:DummyBrandGraph; 
  ];

  rr:predicateObjectMap [
    rr:predicate ex:name;
    rr:objectMap [ rml:reference "brand" ];
  ].

